%!PS-Adobe-3.0
%%Title: RosStandard sign
%%Creator: Sergey S. Betke <sergey.s.betke@yandex.ru>
%%Copyright: 2018 Sergey S. Betke <sergey.s.betke@yandex.ru>
%%+ See LICENSE at https://github.com/Metrolog/marks
%%DocumentData: Clean7Bit
%%DocumentNeededResources: ProcSet (boxes) 2.2 0
%%+: ProcSet (graphics) 2.2 0
%%+: ProcSet (math) 2.2 0
%%DocumentSuppliedResources: ProcSet (image-rst)
%%Version: 2.2 0
%%EndComments
%%BeginProlog

%%IncludeResource: ProcSet boxes 2.2 0
/boxes /ProcSet findresource begin

%%IncludeResource: ProcSet graphics 2.2 0
/graphics /ProcSet findresource begin

%%IncludeResource: ProcSet math 2.2 0
/math /ProcSet findresource begin

%(image-rst) /ProcSet resourcestatus { pop pop } {
%!PS-Adobe-3.0 Resource-ProcSet
%%BeginResource: ProcSet (image-rst)
/image-rst <<

% знак РСТ
/RST % H_size --> -
{
  10 dict begin
  /H exch def % параметр H (высота) знака
  /x1  15 tan  H 2 div  mul  neg  def
  /R1  H  H 2 div  15 cos  div  sub  def
  /x2  0.17 H mul  def
  /y2  R1 dup mul  x2 x1 sub  dup mul  sub  sqrt  def
  /R2  y2  0.25 H mul  add  def
  /x4  0.5 H mul  def
  /y4  3 sqrt  2 div  H mul  H 2 div  sub  def
  /x5  x4  def
  /y5  R2 dup mul  x5 x2 sub  dup mul  sub  sqrt  y2 sub  def

  % сохраняем на стеке текущую матрицу преобразования системы координат для последующего восстановления
  matrix currentmatrix
  % переносим начало координат в центр символа РСТ
  currentpoint translate

  % С
  x4 y4 moveto
    0  H 2 div neg  H
    x4 y4 arc_angle_from
    105
  arc
  x1 0 R1 105 255 arc
    0  H 2 div  H
    255
    x4  y4 neg  arc_angle_to
  arc
  x5  y5 neg  lineto
    x2 y2 R2
    x5  y5 neg  arc_angle_from
    270
  arcn
  x2 0  0.25 H mul  270 90 arcn
    x2  y2 neg  R2
    90
    x5 y5  arc_angle_to
  arcn
  closepath

  % Т
    0.5  0.18 2 div  add  H mul
    0.25 H mul  2 div  neg
  moveto
  0  0.25 0.1 sub  H mul  rlineto
  0.35 0.18 sub  2 div  H mul  0  rlineto
  0  0.1 H mul  rlineto
  0.35 H mul neg  0  rlineto
  0  0.1 H mul neg  rlineto
  0.35 0.18 sub  2 div  H mul  0  rlineto
  0  0.25 0.1 sub  H mul  neg  rlineto
  closepath

  % р
    0.31 0.08 add H mul neg
    0.28 H mul neg
  moveto
    0.31 0.08 add H mul neg
    0.28 0.1 sub H mul neg
    0.1 H mul
    270 180
  arcn
  % 0  0.18 0.1 add H mul  rlineto
    0.31 H mul neg
    0.1 H mul
    0.18 H mul
    180
    -0.18  0.08 0.04 sub neg  atan
  arcn
    0.31 H mul neg
    0.1 H mul
    0.08 H mul
    -0.08  0.08 0.04 sub neg  atan
    180
  arc
  closepath

  % восстановливаем систему координат
  setmatrix

  end
} bind

% /urst  1 /RST true path_as_upath  cvlit
dup  1 exch  true path_as_upath  cvlit  /urst exch

>> /ProcSet defineresource pop
%%EndResource:
%} ifelse

end % /math /ProcSet findresource begin
end % /graphics /ProcSet findresource begin
end % /boxes /ProcSet findresource begin

%%EndProlog
