%!PS-Adobe-3.0
%%Title: Test: string_BBox должен возвращать близкие результаты при повороте холста на любые углы
%%Creator: Sergey S. Betke <sergey.s.betke@yandex.ru>
%%Copyright: 2018 Sergey S. Betke <sergey.s.betke@yandex.ru>
%%+ See LICENSE at https://github.com/Metrolog/marks
%%LanguageLevel: 3
%%EndComments
%!

%%BeginProlog

/assert /ProcSet findresource begin
/boxes /ProcSet findresource begin
userdict begin

%%EndProlog

/NimbusSans-Regular findfont
12 scalefont setfont

/teststring (Test string) def
    teststring string_BBox size_of_BBox % sx1 sy1
    (size of test string:) = 1 index  1 index  exch = =
    45 rotate
    teststring string_BBox size_of_BBox % sx1 sy1 sx2 sy2
    (size of rotated test string:) = 1 index  1 index  exch = =
  sizes_almost_equal
  (string_BBox must return the same string size and for rotated canvas)
assert

end % userdict
end % /boxes /ProcSet findresource begin
end % /assert /ProcSet findresource begin

%%EOF
